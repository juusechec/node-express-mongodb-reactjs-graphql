(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,a){},53:function(e,t,a){e.exports=a(74)},59:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(46),o=a.n(l),i=a(52),c=a(12),s=a(8),u=a(4),m=(a(58),a(59),a(13)),p=a(14),d=a(16),h=a(15),E=a(17),v=a(18),b=(a(44),a(11)),f=a.n(b);function y(){var e=Object(v.a)(["\n  {\n    books {\n      _id\n      title\n      author\n    }\n  }\n"]);return y=function(){return e},e}var O=f()(y()),g=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(c.c,{pollInterval:500,query:O},function(e){var t=e.loading,a=e.error,n=e.data;return t?"Loading...":a?"Error! ".concat(a.message):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},"LIST OF BOOKS"),r.a.createElement("h4",null,r.a.createElement(s.b,{to:"/create"},"Add Book"))),r.a.createElement("div",{className:"panel-body"},r.a.createElement("table",{className:"table table-stripe"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"))),r.a.createElement("tbody",null,n.books.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(s.b,{to:"/show/".concat(e._id)},e.title)),r.a.createElement("td",null,e.author))}))))))})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N(){var e=Object(v.a)(["\n  mutation updateSavedOpportunity(\n    $id: String!\n    $id_user: String!\n    $id_opportunity: String!\n    $comment: String!\n  ) {\n    updateSavedOpportunity(\n      id: $id\n      id_user: $id_user\n      id_opportunity: $id_opportunity\n      comment: $comment\n    ) {\n      updated_date\n    }\n  }\n"]);return N=function(){return e},e}function S(){var e=Object(v.a)(["\n  query savedOpportunity($savedOpportunityId: String) {\n    savedOpportunity(id: $savedOpportunityId) {\n      _id\n      id_user\n      id_opportunity\n      comment\n    }\n  }\n"]);return S=function(){return e},e}var j=f()(S()),_=f()(N()),k=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t,a,n=this;return r.a.createElement(c.c,{query:j,variables:{savedOpportunityId:this.props.match.params.id}},function(l){var o=l.loading,i=l.error,u=l.data;return o?"Loading...":i?"Error! ".concat(i.message):r.a.createElement(c.b,{mutation:_,key:u.savedOpportunity._id,onCompleted:function(){return n.props.history.push("/list")}},function(n,l){var o=l.loading,i=l.error;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},"EDIT SAVED OPPORTUNITY")),r.a.createElement("div",{className:"panel-body"},r.a.createElement("h4",null,r.a.createElement(s.b,{to:"/list",className:"btn btn-primary"},"Saved Opportunities List")),r.a.createElement("form",{onSubmit:function(r){r.preventDefault(),n({variables:{id:u.savedOpportunity._id,id_user:e.value,id_opportunity:t.value,comment:a.value}}),e.value="",t.value="",a.value=""}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"id_user"},"ID USER:"),r.a.createElement("input",{type:"text",className:"form-control",name:"id_user",ref:function(t){e=t},placeholder:"ID_USER",defaultValue:u.savedOpportunity.id_user})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"ID Opportunity:"),r.a.createElement("input",{type:"text",className:"form-control",name:"id_opportunity",ref:function(e){t=e},placeholder:"ID_OPPORTUNITY",defaultValue:u.savedOpportunity.id_opportunity})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"comment"},"Comment:"),r.a.createElement("input",{type:"text",className:"form-control",name:"comment",ref:function(e){a=e},placeholder:"Author",defaultValue:u.savedOpportunity.comment})),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Submit")),o&&r.a.createElement("p",null,"Loading..."),i&&r.a.createElement("p",null,"Error :( Please try again"))))})})}}]),t}(n.Component);function I(){var e=Object(v.a)(["\n    mutation AddBook(\n        $isbn: String!,\n        $title: String!,\n        $author: String!,\n        $description: String!,\n        $publisher: String!,\n        $published_year: Int!) {\n        addBook(\n            isbn: $isbn,\n            title: $title,\n            author: $author,\n            description: $description,\n            publisher: $publisher,\n            published_year: $published_year) {\n            _id\n        }\n    }\n"]);return I=function(){return e},e}var $=f()(I()),w=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t,a,n,l,o,i=this;return r.a.createElement(c.b,{mutation:$,onCompleted:function(){return i.props.history.push("/")}},function(i,c){var u=c.loading,m=c.error;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},"ADD BOOK")),r.a.createElement("div",{className:"panel-body"},r.a.createElement("h4",null,r.a.createElement(s.b,{to:"/",className:"btn btn-primary"},"Book List")),r.a.createElement("form",{onSubmit:function(r){r.preventDefault(),i({variables:{isbn:e.value,title:t.value,author:a.value,description:n.value,publisher:o.value,published_year:parseInt(l.value)}}),e.value="",t.value="",a.value="",n.value="",o.value=null,l.value=""}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"isbn"},"ISBN:"),r.a.createElement("input",{type:"text",className:"form-control",name:"isbn",ref:function(t){e=t},placeholder:"ISBN"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title:"),r.a.createElement("input",{type:"text",className:"form-control",name:"title",ref:function(e){t=e},placeholder:"Title"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"author"},"Author:"),r.a.createElement("input",{type:"text",className:"form-control",name:"author",ref:function(e){a=e},placeholder:"Author"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("textarea",{className:"form-control",name:"description",ref:function(e){n=e},placeholder:"Description",cols:"80",rows:"3"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"author"},"Publisher:"),r.a.createElement("input",{type:"text",className:"form-control",name:"publisher",ref:function(e){o=e},placeholder:"Publisher"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"author"},"Published Year:"),r.a.createElement("input",{type:"number",className:"form-control",name:"published_year",ref:function(e){l=e},placeholder:"Published Year"})),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Submit")),u&&r.a.createElement("p",null,"Loading..."),m&&r.a.createElement("p",null,"Error :( Please try again"))))})}}]),t}(n.Component);function D(){var e=Object(v.a)(["\n  mutation removeSavedOpportunity($id: String!) {\n    removeSavedOpportunity(id: $id) {\n      _id\n    }\n  }\n"]);return D=function(){return e},e}function C(){var e=Object(v.a)(["\n  query savedOpportunity($savedOpportunityId: String) {\n    savedOpportunity(id: $savedOpportunityId) {\n      _id\n      id_user\n      id_opportunity\n      comment\n    }\n  }\n"]);return C=function(){return e},e}var x=f()(C()),T=f()(D()),L=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(c.c,{pollInterval:500,query:x,variables:{savedOpportunityId:this.props.match.params.id}},function(t){var a=t.loading,n=t.error,l=t.data;return a?"Loading...":n?"Error! ".concat(n.message):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h4",null,r.a.createElement(s.b,{to:"/"},"Saved Opportunities List")),r.a.createElement("h3",{className:"panel-title"},l.savedOpportunity.title)),r.a.createElement("div",{className:"panel-body"},r.a.createElement("dl",null,r.a.createElement("dt",null,"ID User:"),r.a.createElement("dd",null,l.savedOpportunity.id_user),r.a.createElement("dt",null,"ID Opportunity:"),r.a.createElement("dd",null,l.savedOpportunity.id_opportunity),r.a.createElement("dt",null,"Comentario:"),r.a.createElement("dd",null,l.savedOpportunity.comment)),r.a.createElement(c.b,{mutation:T,key:l.savedOpportunity._id,onCompleted:function(){return e.props.history.push("/list")}},function(e,t){var a=t.loading,n=t.error;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e({variables:{id:l.savedOpportunity._id}})}},r.a.createElement(s.b,{to:"/edit/".concat(l.savedOpportunity._id),className:"btn btn-success"},"Edit"),"\xa0",r.a.createElement("button",{type:"submit",className:"btn btn-danger"},"Delete")),a&&r.a.createElement("p",null,"Loading..."),n&&r.a.createElement("p",null,"Error :( Please try again"))}))))})}}]),t}(n.Component);a(68);function B(){var e=Object(v.a)(["\n  {\n    savedOpportunities {\n      _id\n      id_user\n      id_opportunity\n      comment\n    }\n  }\n"]);return B=function(){return e},e}var P=f()(B()),A=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(c.c,{pollInterval:500,query:P},function(e){var t=e.loading,a=e.error,n=e.data;return t?"Loading...":a?"Error! ".concat(a.message):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},"Saved Opportunities")),r.a.createElement("div",{className:"panel-body"},r.a.createElement("table",{className:"table table-stripe"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"User ID"),r.a.createElement("th",null,"Opportunity ID"),r.a.createElement("th",null,"Comment"))),r.a.createElement("tbody",null,n.savedOpportunities.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(s.b,{to:"/show/".concat(e._id)},"See")),r.a.createElement("td",null,e.id_user),r.a.createElement("td",null,e.id_opportunity),r.a.createElement("td",null,e.comment))}))))))})}}]),t}(n.Component),F=a(28),q={graphqlEndpoint:"http://localhost:3001/graphql",bioEndpoint:"http://localhost:3001/bio",postEndpoint:"http://localhost:3001/proxy/post"},U=(a(69),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={error:null,isLoaded:!1,bio:{},value:""},a.handleChange=a.handleChange.bind(Object(F.a)(Object(F.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(F.a)(Object(F.a)(a))),a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"getBioData",value:function(e){var t=this,a="".concat(q.bioEndpoint,"?username=").concat(e);fetch(a).then(function(e){return e.json()}).then(function(e){console.log("BIO DATA",e),e.person?(sessionStorage.setItem("bio",JSON.stringify(e)),t.setState({isLoaded:!0,bio:e,error:null})):t.setState({error:"That bio isn't exists!",isLoaded:!1})})}},{key:"handleSubmit",value:function(e){console.log("A name was submitted: "+this.state.value),e.preventDefault(),this.getBioData(this.state.value)}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},"That's your bio"),r.a.createElement("h4",null,"Bio")),r.a.createElement("div",{className:"panel-body"},r.a.createElement("ul",null,r.a.createElement("li",null,"Fullname: ",this.state.bio.person.name),r.a.createElement("li",null,"Summary: ",this.state.bio.person.summaryOfBio)),r.a.createElement(s.b,{to:"/opportunities/".concat(this.state.value),className:"btn btn-success"},"See job opportunities!")))):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},"What's your bio?")),r.a.createElement("div",{className:"panel-body"},this.state.error&&r.a.createElement("label",null,r.a.createElement("div",null,"Error: ",this.state.error)),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"BioId:",r.a.createElement("input",{type:"text",className:"form-control",value:this.state.value,onChange:this.handleChange})),r.a.createElement("input",{type:"submit",value:"Search",className:"btn btn-success"})))))}}]),t}(n.Component)),J=a(42),K=a.n(J),R=a(51);a(72);function V(){var e=Object(v.a)(["\n  mutation AddSavedOpportunity(\n    $id_user: String!\n    $id_opportunity: String!\n    $comment: String!\n  ) {\n    addSavedOpportunity(\n      id_user: $id_user\n      id_opportunity: $id_opportunity\n      comment: $comment\n    ) {\n      _id\n    }\n  }\n"]);return V=function(){return e},e}var Y=f()(V()),W=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={error:null,isLoaded:!1,oportunities:[],criteria:[],value:"",userId:""},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(R.a)(K.a.mark(function e(){var t,a,n;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("bio")),this.setState({userId:t.person.publicId}),a=t.person.summaryOfBio,e.next=5,this.getKeywords(a);case 5:n=e.sent,console.log("keywords",n),this.getOpportunities(n.keywords);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getKeywords",value:function(e){var t={data:e,word_qty:10};return new Promise(function(e,a){fetch("http://localhost:3001/extract",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(t){e(t)}).catch(function(e){a(e)})})}},{key:"getOpportunities",value:function(e){for(var t=this,a="".concat(q.postEndpoint,"/opportunities/_search/?currency=USD%24&page=0&periodicity=hourly&lang=en&size=20&aggregate=false&offset=0"),n=[],r=0;r<e.length;r++){var l=e[r].parsed_value;n.push({"skill/role":{text:l,experience:"potential-to-develop"}})}console.log("criteria",n);var o={or:n};console.log("getOpportunities api url",a),fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(e){return e.json()}).then(function(e){console.log("OPPORTUNITIES DATA",e),e.results?t.setState({isLoaded:!0,oportunities:e.results,criteria:n,error:null}):t.setState({error:"That link isn't exists!",isLoaded:!1})})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?r.a.createElement(c.b,{mutation:Y,onCompleted:function(){console.log("OK!!!!!!")}},function(t,a){a.loading,a.error;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},"That's your work selection"),r.a.createElement("h4",null,"Opportunities")),r.a.createElement("div",{className:"panel-body"},r.a.createElement("ul",null,e.state.oportunities.map(function(a,n){return r.a.createElement("div",{key:"opportunity".concat(n)},r.a.createElement("a",{href:"https://torre.co/jobs/".concat(a.id),target:"_blank",rel:"noopener noreferrer",className:"text"},r.a.createElement("li",null,a.objective)),r.a.createElement("div",{className:"star",onClick:function(){t({variables:{id_user:e.state.userId,id_opportunity:a.id,comment:a.objective}}),alert("Saved opportunity!")}}))})),r.a.createElement("br",null),r.a.createElement("h4",null,"Some keywords detected for you bio"),r.a.createElement("ul",null,e.state.criteria.map(function(e,t){return r.a.createElement("li",{key:"criteria".concat(t)},e["skill/role"].text)})),r.a.createElement(s.b,{to:"/list",className:"btn btn-success"},"See saved opportunities"))))}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},"Cargando..."))))}}]),t}(n.Component),z=new i.a({uri:q.graphqlEndpoint});o.a.render(r.a.createElement(c.a,{client:z},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(u.a,{exact:!0,path:"/",component:U}),r.a.createElement(u.a,{path:"/list",component:A}),r.a.createElement(u.a,{path:"/app",component:g}),r.a.createElement(u.a,{path:"/edit/:id",component:k}),r.a.createElement(u.a,{path:"/create",component:w}),r.a.createElement(u.a,{path:"/show/:id",component:L}),r.a.createElement(u.a,{path:"/opportunities/:id",component:W})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[53,1,2]]]);
//# sourceMappingURL=main.36b0352f.chunk.js.map